jmp _std_graphics_draw_line

include! draw_point

.std.graphics.draw_line
  push $st, @5
  add $bp, $st

  mov $vi(20), $st    ; p2 y
  mov $vi(21), $st    ; p2 x

  mov $vi(22), $st    ; p1 y
  mov $vi(22), $st    ; p1 x

  mov $vi(24), $st    ; color

  cast $vi(20), float
  cast $vi(21), float
  cast $vi(22), float
  cast $vi(23), float

  sub  $vi(21), $vi(23)   ; x1
  sub  $vi(20), $vi(22)   ; x2


  push $st, @5
  sub $bp, $st
ret

._std_graphics_draw_line
